{% extends 'adminapp/base_admin.html' %}

{% block title %}{% if category %}Edit{% else %}Add{% endif %} Category{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="mb-6 flex justify-between items-center">
        <h2 class="text-2xl font-bold text-slate-800">{% if category %}Edit{% else %}Add{% endif %} Category</h2>
        <a href="{% url 'admin_category_list' %}" class="text-sm text-slate-500 hover:text-slate-700">Cancel and go
            back</a>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-8">
        <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}

            <!-- Name -->
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Category Name</label>
                <input type="text" name="name" value="{{ category.name|default:'' }}" required
                    class="block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-4 py-2 border">
            </div>

            <!-- Slug -->
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Slug</label>
                <input type="text" name="slug" value="{{ category.slug|default:'' }}" required
                    class="block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-4 py-2 border bg-slate-50">
            </div>

            <!-- Image -->
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-2">Category Image</label>

                {% if category.image %}
                <div class="mb-4 flex items-center gap-4">
                    <img src="{{ category.image.url }}" alt="{{ category.name }}"
                        class="h-20 w-20 object-cover rounded-lg border border-slate-200">
                    <span class="text-xs text-slate-500">Current Image</span>
                </div>
                {% endif %}

                <input type="file" name="image" class="block w-full text-sm text-slate-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-full file:border-0
                    file:text-sm file:font-semibold
                    file:bg-blue-50 file:text-blue-700
                    hover:file:bg-blue-100
                " />
            </div>

            <!-- Actions -->
            <div class="pt-4 flex items-center gap-4 border-t border-slate-100 mt-6">
                <button type="submit"
                    class="flex-1 justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600">
                    Save Category
                </button>
                <a href="{% url 'admin_category_list' %}"
                    class="flex-1 text-center justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold leading-6 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}